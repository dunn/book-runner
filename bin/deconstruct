#!/usr/bin/env node

(function() {
  'use strict';
  if (!process.argv[2]) {
    console.error('Error: missing argument\n\nUsage:\n./deconstruct ../book2/text.js > output.txt');
    return process.exitCode = 1;
  }

  process.env.DECONSTRUCT = '1';

  const book = require(process.argv[2]).reverse();

  let l = book.length;
  while (l--) {
    const batch = book[l].reverse();
    let b = batch.length;
    while (b--) {
      const broke = batch[b].replace(/\n/g, '\\n');
      console.log(`${broke}\n`);
    }
    if (l > 0)
      console.log('******\n');
  }
})();
